(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Re=`\r
struct Settings{\r
    scale: f32\r
}\r
@group(0) @binding(0) var noise_texture: texture_storage_3d<r32float, write>;\r
@group(0) @binding(1) var <uniform> settings : Settings;\r
\r
\r
//fade function smoothens transition between grid points\r
fn fade(t: f32)-> f32{\r
    return t * t * t * (t * (t * 6 - 15) + 10);\r
}\r
\r
fn grad(hash: u32, coord: vec3f) -> f32 {\r
    var h: u32 = hash & 15u; // CONVERT LO 4 BITS OF HASH CODE\r
    var u: f32 = select(coord.y, coord.x, h < 8u);\r
    var v: f32 = select(select(coord.z, coord.x, h == 12u || h == 14u), coord.y , h < 4u);\r
    \r
    return select(u, -u, (h & 1u) != 0) + select(-v, v, (h & 2u) != 0);\r
}\r
\r
fn perlinNoise3D(coord: vec3f) -> f32 {\r
    let floored = vec3u(floor(coord)) & vec3u(255);\r
\r
    let fract = fract(coord);\r
    \r
    let u: f32 = fade(fract.x);\r
    let v: f32 = fade(fract.y);\r
    let w: f32 = fade(fract.z);\r
\r
\r
    let A: u32 = p[floored.x] + floored.y;\r
    let AA: u32 = p[A] + floored.z;\r
    let AB: u32 = p[A + 1u] + floored.z;\r
    let B: u32 = p[floored.x + 1u] + floored.y;\r
    let BA: u32 = p[B] + floored.z;\r
    let BB: u32 = p[B + 1u] + floored.z;\r
\r
    return mix(\r
        mix(\r
            mix(\r
                grad(p[AA], fract),\r
                grad(p[BA], fract - vec3f(1.0, 0.0, 0.0)),\r
                u\r
            ),\r
            mix(\r
                grad(p[AB], fract - vec3f(0.0, 1.0, 0.0)),\r
                grad(p[BB], fract - vec3f(1.0, 1.0, 0.0)),\r
                u\r
            ),\r
            v\r
        ),\r
        mix(\r
            mix(\r
                grad(p[AA + 1], fract - vec3f(0.0, 0.0, 1.0)),\r
                grad(p[BA + 1], fract - vec3f(1.0, 0.0, 1.0)),\r
                u\r
            ),\r
            mix(\r
                grad(p[AB + 1], fract - vec3f(0.0, 1.0, 1.0)),\r
                grad(p[BB + 1], fract - vec3f(1.0, 1.0, 1.0)),\r
                u\r
            ),\r
            v\r
        ),\r
        w\r
    );\r
}\r
\r
\r
// Constants\r
var<private> p: array<u32, 512> = array<u32, 512>(\r
    151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,\r
    240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,\r
    33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,\r
    158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,\r
    25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,\r
    100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,\r
    206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,\r
    153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,\r
    218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\r
    107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,\r
    205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,\r
    240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,\r
    33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,\r
    158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,\r
    25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,\r
    100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,\r
    206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,\r
    153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,\r
    218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,\r
    107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,\r
    205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180\r
);\r
\r
@compute @workgroup_size(4,4,4) fn main(\r
    @builtin(global_invocation_id) id: vec3<u32>\r
) {\r
    \r
    var noise_value = perlinNoise3D(vec3f(id) * settings.scale) / 2.0 + 0.5;\r
    noise_value += perlinNoise3D(vec3f(id) * settings.scale * 10.0) / 50.0;\r
    // var noise_value = f32(id.y) * 0.02;\r
\r
    textureStore(noise_texture, id, vec4<f32>(noise_value , 0.0, 0.0, 1.0));\r
}`;function Ve(t,e){const n={};n.module=t.createShaderModule({label:"Noise Shader",code:Re}),n.bindGroupLayout=t.createBindGroupLayout({label:"Noise stage bind group",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,storageTexture:{access:"write-only",format:"r32float",viewDimension:"3d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]});const r={size:[e.cellCountX,e.cellCountY,e.cellCountZ],format:"r32float",dimension:"3d",usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING};return n.noiseTexture=t.createTexture(r),n.settingsBuffer=t.createBuffer({label:"Noise Settings",size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),n.settings={scale:.05},n.updateSettingsBuffer=()=>{t.queue.writeBuffer(n.settingsBuffer,0,new Float32Array([n.settings.scale]))},n.updateSettingsBuffer(),n.bindGroup=t.createBindGroup({label:"Noise stage bind group",layout:n.bindGroupLayout,entries:[{binding:0,resource:n.noiseTexture.createView()},{binding:1,resource:{buffer:n.settingsBuffer}}]}),n.pipelineLayout=t.createPipelineLayout({label:"Noise stage pipeline layout",bindGroupLayouts:[n.bindGroupLayout]}),n.pipeline=t.createComputePipeline({label:"Noise stage pipeline",layout:n.pipelineLayout,compute:{module:n.module,entryPoint:"main"}}),n}var Me=`@group(0) @binding(0) var noise_texture : texture_3d<f32>;\r
@group(0) @binding(1) var<uniform> settings: Settings;

struct Settings {\r
    zIndex: u32\r
}

const pos = array<vec2f, 3>(\r
    vec2f(-1, -1), vec2f(-1, 3), vec2f(3, -1)\r
);

@vertex fn vs(@builtin(vertex_index) i: u32) -> @builtin(position) vec4f {\r
    let p = pos[i];\r
    return vec4f(p, 0, 1);\r
}

@fragment fn fs(@builtin(position) pos: vec4f) -> @location(0) vec4f {\r
    let coords = vec2u(pos.xy) - vec2u(500, 0);

    var red : f32 = 0.0;\r
    var green: f32 = 0.0;\r
    var blue: f32 = 0.0;

    let depth = textureDimensions(noise_texture).z;

    \r
    red += textureLoad(noise_texture, vec3u(coords / 25, settings.zIndex), 0).r;\r
    green += textureLoad(noise_texture, vec3u(coords / 25, settings.zIndex + 1), 0).r;\r
    blue += textureLoad(noise_texture, vec3u(coords / 25, settings.zIndex + 2), 0).r;\r
    \r
    return vec4f(red, green, blue, 1);\r
}`;function Ie(t,e,n,r){const i={};return i.module=t.createShaderModule({label:"Debug Noise Shader",code:Me}),i.settingsBuffer=t.createBuffer({label:"Debug Noise stage settings buffer",size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),i.bindGroupLayout=t.createBindGroupLayout({label:"Debug Noise stage bind group",entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,texture:{sampleType:"unfilterable-float",viewDimension:"3d",multisampled:!1}},{binding:1,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]}),i.bindGroup=t.createBindGroup({label:"Debug Noise stage bind group",layout:i.bindGroupLayout,entries:[{binding:0,resource:n.createView()},{binding:1,resource:{buffer:i.settingsBuffer}}]}),i.pipelineLayout=t.createPipelineLayout({label:"Debug Noise stage pipeline layout",bindGroupLayouts:[i.bindGroupLayout]}),i.pipeline=t.createRenderPipeline({label:"Debug Noise stage pipeline",layout:i.pipelineLayout,vertex:{module:i.module,entryPoint:"vs",buffers:[]},fragment:{module:i.module,entryPoint:"fs",targets:[{format:r}]}}),i.renderPassDescriptor={label:"Debug Noise stage render pass",colorAttachments:[{view:void 0,loadOp:"clear",storeOp:"store",clearColor:{r:0,g:0,b:0,a:1}}]},i}var De=`struct Settings {\r
    isoValue: f32,\r
    interpolationFactor: f32,\r
};

struct Vertex {\r
    position: vec3<f32>,\r
    normal: vec3<f32>\r
};

struct IndirectArgs {\r
    vertIndex: atomic<u32>,\r
    indexCount: atomic<u32>,\r
    instanceCount: u32,\r
    firstIndex: u32,\r
    baseVertex: u32,\r
    firstInstance: u32\r
};

struct ConfigurationEntry {\r
  triCount: u32,\r
  edgeCount: u32,\r
  edges: u32,\r
  tris: array<vec3i,5>\r
};\r

struct EdgeLUTEntry {\r
    v1: u32,\r
    v2: u32,\r
    staticOffset: vec3f,\r
    interpolatedOffset: vec3f\r
}\r

@group(0) @binding(0) var noise_texture: texture_3d<f32>;\r
@group(0) @binding(1) var<uniform> settings: Settings;\r
@group(0) @binding(2) var<storage, read_write> indirectArgs : IndirectArgs;\r
@group(0) @binding(3) var<storage, read_write> vertices: array<Vertex>;\r
@group(0) @binding(4) var<storage, read_write> indices: array<u32>;\r
@group(0) @binding(5) var<uniform> LUT: array<ConfigurationEntry, 256>;

var<private> indexMap: array<u32, 12>;\r
var<private> currentIdx: u32 = 0;\r
const edgeLUT = array<EdgeLUTEntry,12>(\r
    EdgeLUTEntry(0,1, vec3f(0.0, 0.0, 0.0), vec3f(1.0, 0.0, 0.0)),\r
    EdgeLUTEntry(1,2, vec3f(1.0, 0.0, 0.0), vec3f(0.0, 0.0, 1.0)),\r
    EdgeLUTEntry(3,2, vec3f(0.0, 0.0, 1.0), vec3f(1.0, 0.0, 0.0)),\r
    EdgeLUTEntry(0,3, vec3f(0.0, 0.0, 0.0), vec3f(0.0, 0.0, 1.0)),\r
    EdgeLUTEntry(4,5, vec3f(0.0, 1.0, 0.0), vec3f(1.0, 0.0, 0.0)),\r
    EdgeLUTEntry(5,6, vec3f(1.0, 1.0, 0.0), vec3f(0.0, 0.0, 1.0)),\r
    EdgeLUTEntry(7,6, vec3f(0.0, 1.0, 1.0), vec3f(1.0, 0.0, 0.0)),\r
    EdgeLUTEntry(4,7, vec3f(0.0, 1.0, 0.0), vec3f(0.0, 0.0, 1.0)),\r
    EdgeLUTEntry(0,4, vec3f(0.0, 0.0, 0.0), vec3f(0.0, 1.0, 0.0)),\r
    EdgeLUTEntry(1,5, vec3f(1.0, 0.0, 0.0), vec3f(0.0, 1.0, 0.0)),\r
    EdgeLUTEntry(2,6, vec3f(1.0, 0.0, 1.0), vec3f(0.0, 1.0, 0.0)),\r
    EdgeLUTEntry(3,7, vec3f(0.0, 0.0, 1.0), vec3f(0.0, 1.0, 0.0)),\r
);

fn valueAt(pos: vec3<u32>) -> f32 {\r
    return textureLoad(noise_texture, pos, 0).r;\r
}

fn normalAt(pos: vec3<u32>) -> vec3<f32> {\r
    return vec3(\r
        valueAt(pos + vec3<u32>(1,0,0)) - valueAt(pos - vec3<u32>(1,0,0)),\r
        valueAt(pos + vec3<u32>(0,1,0)) - valueAt(pos - vec3<u32>(0,1,0)),\r
        valueAt(pos + vec3<u32>(0,0,1)) - valueAt(pos - vec3<u32>(0,0,1))\r
    );\r
}

@compute @workgroup_size(4,4,4) fn main(\r
    @builtin(global_invocation_id) id: vec3<u32>,\r
    @builtin(local_invocation_index) index: u32\r
) {\r
    
    var isoValues: array<f32, 8>;

    isoValues[0] = valueAt(id.xyz + vec3<u32>(0,0,0));\r
    isoValues[1] = valueAt(id.xyz + vec3<u32>(1,0,0));\r
    isoValues[2] = valueAt(id.xyz + vec3<u32>(1,0,1));\r
    isoValues[3] = valueAt(id.xyz + vec3<u32>(0,0,1));\r
    isoValues[4] = valueAt(id.xyz + vec3<u32>(0,1,0));\r
    isoValues[5] = valueAt(id.xyz + vec3<u32>(1,1,0));\r
    isoValues[6] = valueAt(id.xyz + vec3<u32>(1,1,1));\r
    isoValues[7] = valueAt(id.xyz + vec3<u32>(0,1,1));\r

    var cubeIndex: u32 = 0;\r
    if (isoValues[0] < settings.isoValue) { cubeIndex |= 1; }\r
    if (isoValues[1] < settings.isoValue) { cubeIndex |= 2; }\r
    if (isoValues[2] < settings.isoValue) { cubeIndex |= 4; }\r
    if (isoValues[3] < settings.isoValue) { cubeIndex |= 8; }\r
    if (isoValues[4] < settings.isoValue) { cubeIndex |= 16; }\r
    if (isoValues[5] < settings.isoValue) { cubeIndex |= 32; }\r
    if (isoValues[6] < settings.isoValue) { cubeIndex |= 64; }\r
    if (isoValues[7] < settings.isoValue) { cubeIndex |= 128; }

    let config = LUT[cubeIndex];

    
    if (config.triCount == 0) {\r
        
        
        
        return;\r
    }

    var startingVertIndex: u32 = atomicAdd(&indirectArgs.vertIndex, config.edgeCount);\r
    var startingIndexIndex: u32 = atomicAdd(&indirectArgs.indexCount, config.triCount * 3);\r

    let global_pos = vec3f(id.xyz);\r
    var edgeMask:u32 = 1;\r
    
    for(var i = 0; i < 12; i++) {\r
        if ((config.edges & edgeMask) == 0) {\r
            edgeMask <<= 1;\r
            continue;\r
        }

        let edgeLUTEntry = edgeLUT[i];

        let f1 = isoValues[edgeLUTEntry.v1];\r
        let f2 = isoValues[edgeLUTEntry.v2];\r
        let t = mix(0.5, (settings.isoValue - f1) / (f2 - f1), settings.interpolationFactor);

        let vert_pos: vec3f = vec3f(id.xyz) + edgeLUTEntry.staticOffset + edgeLUTEntry.interpolatedOffset * t;\r
        \r
        indexMap[i] = startingVertIndex + currentIdx;\r
        vertices[indexMap[i]].position = vert_pos; \r
        let na = normalAt(id.xyz + vec3u(edgeLUTEntry.staticOffset));\r
        let nb = normalAt(id.xyz + vec3u(edgeLUTEntry.staticOffset + edgeLUTEntry.interpolatedOffset));\r
        vertices[indexMap[i]].normal = mix(na, nb, t);

        currentIdx += 1;

        edgeMask <<= 1;\r
    }

    
    for(var i = 0u; i < config.triCount; i++) {\r
        let tri = config.tris[i];\r
        indices[startingIndexIndex + i * 3 + 0] = indexMap[tri.x];\r
        indices[startingIndexIndex + i * 3 + 1] = indexMap[tri.y];\r
        indices[startingIndexIndex + i * 3 + 2] = indexMap[tri.z];\r
    }

    
}`;function Fe(t,e,n){const r={};r.module=t.createShaderModule({label:"Marching Cubes Shader",code:De}),r.settingsBuffer=t.createBuffer({label:"Marching Cubes Settings",size:8,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),r.settings={isoValue:.5,interpolationFactor:1},r.updateSettingsBuffer=()=>{t.queue.writeBuffer(r.settingsBuffer,0,new Float32Array([r.settings.isoValue,r.settings.interpolationFactor]))},r.updateSettingsBuffer(),r.indirectArgsBuffer=t.createBuffer({label:"Marching Cubes Atomics",size:24,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_DST}),t.queue.writeBuffer(r.indirectArgsBuffer,0,new Uint32Array([0,0,1,0,0,0]));const i=e.cellCountX*e.cellCountY*e.cellCountZ;return r.vertexBuffer=t.createBuffer({label:"Marching Cubes Vertices",size:i*12*6*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX}),r.indexBuffer=t.createBuffer({label:"Marching Cubes Indices",size:i*5*3*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.INDEX}),r.LUT=t.createBuffer({label:"Marching Cubes LUT",size:256*24*4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),t.queue.writeBuffer(r.LUT,0,Ne),r.bindGroupLayout=t.createBindGroupLayout({label:"Marching Cubes Bind Group Layout",entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"unfilterable-float",viewDimension:"3d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}}]}),r.bindGroup=t.createBindGroup({label:"Marching Cubes Bind Group",layout:r.bindGroupLayout,entries:[{binding:0,resource:n.createView()},{binding:1,resource:{buffer:r.settingsBuffer}},{binding:2,resource:{buffer:r.indirectArgsBuffer}},{binding:3,resource:{buffer:r.vertexBuffer}},{binding:4,resource:{buffer:r.indexBuffer}},{binding:5,resource:{buffer:r.LUT}}]}),r.pipelineLayout=t.createPipelineLayout({label:"Marching Cubes Pipeline Layout",bindGroupLayouts:[r.bindGroupLayout]}),r.pipeline=t.createComputePipeline({label:"Marching Cubes Pipeline",layout:r.pipelineLayout,compute:{module:r.module,entryPoint:"main"}}),r}const Ne=new Uint32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,265,0,0,8,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,515,0,0,1,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,778,0,1,8,3,0,9,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,1030,0,1,2,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,1295,0,0,8,3,0,1,2,10,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,1541,0,9,2,10,0,0,2,9,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,1804,0,2,8,3,0,2,10,8,0,10,9,8,0,0,0,0,0,0,0,0,0,1,3,2060,0,3,11,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,2309,0,0,11,2,0,8,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,2575,0,1,9,0,0,2,3,11,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,2822,0,1,11,2,0,1,9,11,0,9,8,11,0,0,0,0,0,0,0,0,0,2,4,3082,0,3,10,1,0,11,10,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,3331,0,0,10,1,0,0,8,10,0,8,11,10,0,0,0,0,0,0,0,0,0,3,5,3593,0,3,9,0,0,3,11,9,0,11,10,9,0,0,0,0,0,0,0,0,0,2,4,3840,0,9,8,10,0,10,8,11,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,400,0,4,7,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,153,0,4,3,0,0,7,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,915,0,0,1,9,0,8,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,666,0,4,1,9,0,4,7,1,0,7,3,1,0,0,0,0,0,0,0,0,0,2,6,1430,0,1,2,10,0,8,4,7,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,1183,0,3,4,7,0,3,0,4,0,1,2,10,0,0,0,0,0,0,0,0,0,3,7,1941,0,9,2,10,0,9,0,2,0,8,4,7,0,0,0,0,0,0,0,0,0,4,6,1692,0,2,10,9,0,2,9,7,0,2,7,3,0,7,9,4,0,0,0,0,0,2,6,2460,0,8,4,7,0,3,11,2,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,2197,0,11,4,7,0,11,2,4,0,2,0,4,0,0,0,0,0,0,0,0,0,3,9,2975,0,9,0,1,0,8,4,7,0,2,3,11,0,0,0,0,0,0,0,0,0,4,6,2710,0,4,7,11,0,9,4,11,0,9,11,2,0,9,2,1,0,0,0,0,0,3,7,3482,0,3,10,1,0,3,11,10,0,7,8,4,0,0,0,0,0,0,0,0,0,4,6,3219,0,1,11,10,0,1,4,11,0,1,0,4,0,7,11,4,0,0,0,0,0,4,8,3993,0,4,7,8,0,9,0,11,0,9,11,10,0,11,0,3,0,0,0,0,0,3,5,3728,0,4,7,11,0,4,11,9,0,9,11,10,0,0,0,0,0,0,0,0,0,1,3,560,0,9,5,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,825,0,9,5,4,0,0,8,3,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,51,0,0,5,4,0,1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,314,0,8,5,4,0,8,3,5,0,3,1,5,0,0,0,0,0,0,0,0,0,2,6,1590,0,1,2,10,0,9,5,4,0,0,0,0,0,0,0,0,0,0,0,0,0,3,9,1855,0,3,0,8,0,1,2,10,0,4,9,5,0,0,0,0,0,0,0,0,0,3,5,1077,0,5,2,10,0,5,4,2,0,4,0,2,0,0,0,0,0,0,0,0,0,4,6,1340,0,2,10,5,0,3,2,5,0,3,5,4,0,3,4,8,0,0,0,0,0,2,6,2620,0,9,5,4,0,2,3,11,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,2869,0,0,11,2,0,0,8,11,0,4,9,5,0,0,0,0,0,0,0,0,0,3,7,2111,0,0,5,4,0,0,1,5,0,2,3,11,0,0,0,0,0,0,0,0,0,4,6,2358,0,2,1,5,0,2,5,8,0,2,8,11,0,4,8,5,0,0,0,0,0,3,7,3642,0,10,3,11,0,10,1,3,0,9,5,4,0,0,0,0,0,0,0,0,0,4,8,3891,0,4,9,5,0,0,8,1,0,8,10,1,0,8,11,10,0,0,0,0,0,4,6,3129,0,5,4,0,0,5,0,11,0,5,11,10,0,11,0,3,0,0,0,0,0,3,5,3376,0,5,4,8,0,5,8,10,0,10,8,11,0,0,0,0,0,0,0,0,0,2,4,928,0,9,7,8,0,5,7,9,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,681,0,9,3,0,0,9,5,3,0,5,7,3,0,0,0,0,0,0,0,0,0,3,5,419,0,0,7,8,0,0,1,7,0,1,5,7,0,0,0,0,0,0,0,0,0,2,4,170,0,1,5,3,0,3,5,7,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,1958,0,9,7,8,0,9,5,7,0,10,1,2,0,0,0,0,0,0,0,0,0,4,8,1711,0,10,1,2,0,9,5,0,0,5,3,0,0,5,7,3,0,0,0,0,0,4,6,1445,0,8,0,2,0,8,2,5,0,8,5,7,0,10,5,2,0,0,0,0,0,3,5,1196,0,2,10,5,0,2,5,3,0,3,5,7,0,0,0,0,0,0,0,0,0,3,7,2988,0,7,9,5,0,7,8,9,0,3,11,2,0,0,0,0,0,0,0,0,0,4,6,2725,0,9,5,7,0,9,7,2,0,9,2,0,0,2,7,11,0,0,0,0,0,4,8,2479,0,2,3,11,0,0,1,8,0,1,7,8,0,1,5,7,0,0,0,0,0,3,5,2214,0,11,2,1,0,11,1,7,0,7,1,5,0,0,0,0,0,0,0,0,0,4,8,4010,0,9,5,8,0,8,5,7,0,10,1,3,0,10,3,11,0,0,0,0,0,5,7,3747,0,5,7,0,0,5,0,9,0,7,11,0,0,1,0,10,0,11,10,0,0,5,7,3497,0,11,10,0,0,11,0,3,0,10,5,0,0,8,0,7,0,5,7,0,0,2,4,3232,0,11,10,5,0,7,11,5,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,1120,0,10,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,1385,0,0,8,3,0,5,10,6,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,1635,0,9,0,1,0,5,10,6,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,1898,0,1,8,3,0,1,9,8,0,5,10,6,0,0,0,0,0,0,0,0,0,2,4,102,0,1,6,5,0,2,6,1,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,367,0,1,6,5,0,1,2,6,0,3,0,8,0,0,0,0,0,0,0,0,0,3,5,613,0,9,6,5,0,9,0,6,0,0,2,6,0,0,0,0,0,0,0,0,0,4,6,876,0,5,9,8,0,5,8,2,0,5,2,6,0,3,2,8,0,0,0,0,0,2,6,3180,0,2,3,11,0,10,6,5,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,3429,0,11,0,8,0,11,2,0,0,10,6,5,0,0,0,0,0,0,0,0,0,3,9,3695,0,0,1,9,0,2,3,11,0,5,10,6,0,0,0,0,0,0,0,0,0,4,8,3942,0,5,10,6,0,1,9,2,0,9,11,2,0,9,8,11,0,0,0,0,0,3,5,2154,0,6,3,11,0,6,5,3,0,5,1,3,0,0,0,0,0,0,0,0,0,4,6,2403,0,0,8,11,0,0,11,5,0,0,5,1,0,5,11,6,0,0,0,0,0,4,6,2665,0,3,11,6,0,0,3,6,0,0,6,5,0,0,5,9,0,0,0,0,0,3,5,2912,0,6,5,9,0,6,9,11,0,11,9,8,0,0,0,0,0,0,0,0,0,2,6,1520,0,5,10,6,0,4,7,8,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,1273,0,4,3,0,0,4,7,3,0,6,5,10,0,0,0,0,0,0,0,0,0,3,9,2035,0,1,9,0,0,5,10,6,0,8,4,7,0,0,0,0,0,0,0,0,0,4,8,1786,0,10,6,5,0,1,9,7,0,1,7,3,0,7,9,4,0,0,0,0,0,3,7,502,0,6,1,2,0,6,5,1,0,4,7,8,0,0,0,0,0,0,0,0,0,4,8,255,0,1,2,5,0,5,2,6,0,3,0,4,0,3,4,7,0,0,0,0,0,4,8,1013,0,8,4,7,0,9,0,5,0,0,6,5,0,0,2,6,0,0,0,0,0,5,7,764,0,7,3,9,0,7,9,4,0,3,2,9,0,5,9,6,0,2,6,9,0,3,9,3580,0,3,11,2,0,7,8,4,0,10,6,5,0,0,0,0,0,0,0,0,0,4,8,3317,0,5,10,6,0,4,7,2,0,4,2,0,0,2,7,11,0,0,0,0,0,4,12,4095,0,0,1,9,0,4,7,8,0,2,3,11,0,5,10,6,0,0,0,0,0,5,9,3830,0,9,2,1,0,9,11,2,0,9,4,11,0,7,11,4,0,5,10,6,0,4,8,2554,0,8,4,7,0,3,11,5,0,3,5,1,0,5,11,6,0,0,0,0,0,5,7,2291,0,5,1,11,0,5,11,6,0,1,0,11,0,7,11,4,0,0,4,11,0,5,9,3065,0,0,5,9,0,0,6,5,0,0,3,6,0,11,6,3,0,8,4,7,0,4,6,2800,0,6,5,9,0,6,9,11,0,4,7,9,0,7,11,9,0,0,0,0,0,2,4,1616,0,10,4,9,0,6,4,10,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,1881,0,4,10,6,0,4,9,10,0,0,8,3,0,0,0,0,0,0,0,0,0,3,5,1107,0,10,0,1,0,10,6,0,0,6,4,0,0,0,0,0,0,0,0,0,0,4,6,1370,0,8,3,1,0,8,1,6,0,8,6,4,0,6,1,10,0,0,0,0,0,3,5,598,0,1,4,9,0,1,2,4,0,2,6,4,0,0,0,0,0,0,0,0,0,4,8,863,0,3,0,8,0,1,2,9,0,2,4,9,0,2,6,4,0,0,0,0,0,2,4,85,0,0,2,4,0,4,2,6,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,348,0,8,3,2,0,8,2,4,0,4,2,6,0,0,0,0,0,0,0,0,0,3,7,3676,0,10,4,9,0,10,6,4,0,11,2,3,0,0,0,0,0,0,0,0,0,4,8,3925,0,0,8,2,0,2,8,11,0,4,9,10,0,4,10,6,0,0,0,0,0,4,8,3167,0,3,11,2,0,0,1,6,0,0,6,4,0,6,1,10,0,0,0,0,0,5,7,3414,0,6,4,1,0,6,1,10,0,4,8,1,0,2,1,11,0,8,11,1,0,4,6,2650,0,9,6,4,0,9,3,6,0,9,1,3,0,11,6,3,0,0,0,0,0,5,7,2899,0,8,11,1,0,8,1,0,0,11,6,1,0,9,1,4,0,6,4,1,0,3,5,2137,0,3,11,6,0,3,6,0,0,0,6,4,0,0,0,0,0,0,0,0,0,2,4,2384,0,6,4,8,0,11,6,8,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,1984,0,7,10,6,0,7,8,10,0,8,9,10,0,0,0,0,0,0,0,0,0,4,6,1737,0,0,7,3,0,0,10,7,0,0,9,10,0,6,7,10,0,0,0,0,0,4,6,1475,0,10,6,7,0,1,10,7,0,1,7,8,0,1,8,0,0,0,0,0,0,3,5,1226,0,10,6,7,0,10,7,1,0,1,7,3,0,0,0,0,0,0,0,0,0,4,6,966,0,1,2,6,0,1,6,8,0,1,8,9,0,8,6,7,0,0,0,0,0,5,7,719,0,2,6,9,0,2,9,1,0,6,7,9,0,0,9,3,0,7,3,9,0,3,5,453,0,7,8,0,0,7,0,6,0,6,0,2,0,0,0,0,0,0,0,0,0,2,4,204,0,7,3,2,0,6,7,2,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,4044,0,2,3,11,0,10,6,8,0,10,8,9,0,8,6,7,0,0,0,0,0,5,7,3781,0,2,0,7,0,2,7,11,0,0,9,7,0,6,7,10,0,9,10,7,0,5,9,3535,0,1,8,0,0,1,7,8,0,1,10,7,0,6,7,10,0,2,3,11,0,4,6,3270,0,11,2,1,0,11,1,7,0,10,6,1,0,6,7,1,0,0,0,0,0,5,7,3018,0,8,9,6,0,8,6,7,0,9,1,6,0,11,6,3,0,1,3,6,0,2,6,2755,0,0,9,1,0,11,6,7,0,0,0,0,0,0,0,0,0,0,0,0,0,4,6,2505,0,7,8,0,0,7,0,6,0,3,11,0,0,11,6,0,0,0,0,0,0,1,3,2240,0,7,11,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,2240,0,7,6,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,2505,0,3,0,8,0,11,7,6,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,2755,0,0,1,9,0,11,7,6,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,3018,0,8,1,9,0,8,3,1,0,11,7,6,0,0,0,0,0,0,0,0,0,2,6,3270,0,10,1,2,0,6,11,7,0,0,0,0,0,0,0,0,0,0,0,0,0,3,9,3535,0,1,2,10,0,3,0,8,0,6,11,7,0,0,0,0,0,0,0,0,0,3,7,3781,0,2,9,0,0,2,10,9,0,6,11,7,0,0,0,0,0,0,0,0,0,4,8,4044,0,6,11,7,0,2,10,3,0,10,8,3,0,10,9,8,0,0,0,0,0,2,4,204,0,7,2,3,0,6,2,7,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,453,0,7,0,8,0,7,6,0,0,6,2,0,0,0,0,0,0,0,0,0,0,3,7,719,0,2,7,6,0,2,3,7,0,0,1,9,0,0,0,0,0,0,0,0,0,4,6,966,0,1,6,2,0,1,8,6,0,1,9,8,0,8,7,6,0,0,0,0,0,3,5,1226,0,10,7,6,0,10,1,7,0,1,3,7,0,0,0,0,0,0,0,0,0,4,6,1475,0,10,7,6,0,1,7,10,0,1,8,7,0,1,0,8,0,0,0,0,0,4,6,1737,0,0,3,7,0,0,7,10,0,0,10,9,0,6,10,7,0,0,0,0,0,3,5,1984,0,7,6,10,0,7,10,8,0,8,10,9,0,0,0,0,0,0,0,0,0,2,4,2384,0,6,8,4,0,11,8,6,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,2137,0,3,6,11,0,3,0,6,0,0,4,6,0,0,0,0,0,0,0,0,0,3,7,2899,0,8,6,11,0,8,4,6,0,9,0,1,0,0,0,0,0,0,0,0,0,4,6,2650,0,9,4,6,0,9,6,3,0,9,3,1,0,11,3,6,0,0,0,0,0,3,7,3414,0,6,8,4,0,6,11,8,0,2,10,1,0,0,0,0,0,0,0,0,0,4,8,3167,0,1,2,10,0,3,0,11,0,0,6,11,0,0,4,6,0,0,0,0,0,4,8,3925,0,4,11,8,0,4,6,11,0,0,2,9,0,2,10,9,0,0,0,0,0,5,7,3676,0,10,9,3,0,10,3,2,0,9,4,3,0,11,3,6,0,4,6,3,0,3,5,348,0,8,2,3,0,8,4,2,0,4,6,2,0,0,0,0,0,0,0,0,0,2,4,85,0,0,4,2,0,4,6,2,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,863,0,1,9,0,0,2,3,4,0,2,4,6,0,4,3,8,0,0,0,0,0,3,5,598,0,1,9,4,0,1,4,2,0,2,4,6,0,0,0,0,0,0,0,0,0,4,6,1370,0,8,1,3,0,8,6,1,0,8,4,6,0,6,10,1,0,0,0,0,0,3,5,1107,0,10,1,0,0,10,0,6,0,6,0,4,0,0,0,0,0,0,0,0,0,5,7,1881,0,4,6,3,0,4,3,8,0,6,10,3,0,0,3,9,0,10,9,3,0,2,4,1616,0,10,9,4,0,6,10,4,0,0,0,0,0,0,0,0,0,0,0,0,0,2,6,2800,0,4,9,5,0,7,6,11,0,0,0,0,0,0,0,0,0,0,0,0,0,3,9,3065,0,0,8,3,0,4,9,5,0,11,7,6,0,0,0,0,0,0,0,0,0,3,7,2291,0,5,0,1,0,5,4,0,0,7,6,11,0,0,0,0,0,0,0,0,0,4,8,2554,0,11,7,6,0,8,3,4,0,3,5,4,0,3,1,5,0,0,0,0,0,3,9,3830,0,9,5,4,0,10,1,2,0,7,6,11,0,0,0,0,0,0,0,0,0,4,12,4095,0,6,11,7,0,1,2,10,0,0,8,3,0,4,9,5,0,0,0,0,0,4,8,3317,0,7,6,11,0,5,4,10,0,4,2,10,0,4,0,2,0,0,0,0,0,5,9,3580,0,3,4,8,0,3,5,4,0,3,2,5,0,10,5,2,0,11,7,6,0,3,7,764,0,7,2,3,0,7,6,2,0,5,4,9,0,0,0,0,0,0,0,0,0,4,8,1013,0,9,5,4,0,0,8,6,0,0,6,2,0,6,8,7,0,0,0,0,0,4,8,255,0,3,6,2,0,3,7,6,0,1,5,0,0,5,4,0,0,0,0,0,0,5,7,502,0,6,2,8,0,6,8,7,0,2,1,8,0,4,8,5,0,1,5,8,0,4,8,1786,0,9,5,4,0,10,1,6,0,1,7,6,0,1,3,7,0,0,0,0,0,5,9,2035,0,1,6,10,0,1,7,6,0,1,0,7,0,8,7,0,0,9,5,4,0,5,7,1273,0,4,0,10,0,4,10,5,0,0,3,10,0,6,10,7,0,3,7,10,0,4,6,1520,0,7,6,10,0,7,10,8,0,5,4,10,0,4,8,10,0,0,0,0,0,3,5,2912,0,6,9,5,0,6,11,9,0,11,8,9,0,0,0,0,0,0,0,0,0,4,6,2665,0,3,6,11,0,0,6,3,0,0,5,6,0,0,9,5,0,0,0,0,0,4,6,2403,0,0,11,8,0,0,5,11,0,0,1,5,0,5,6,11,0,0,0,0,0,3,5,2154,0,6,11,3,0,6,3,5,0,5,3,1,0,0,0,0,0,0,0,0,0,4,8,3942,0,1,2,10,0,9,5,11,0,9,11,8,0,11,5,6,0,0,0,0,0,5,9,3695,0,0,11,3,0,0,6,11,0,0,9,6,0,5,6,9,0,1,2,10,0,5,7,3429,0,11,8,5,0,11,5,6,0,8,0,5,0,10,5,2,0,0,2,5,0,4,6,3180,0,6,11,3,0,6,3,5,0,2,10,3,0,10,5,3,0,0,0,0,0,4,6,876,0,5,8,9,0,5,2,8,0,5,6,2,0,3,8,2,0,0,0,0,0,3,5,613,0,9,5,6,0,9,6,0,0,0,6,2,0,0,0,0,0,0,0,0,0,5,7,367,0,1,5,8,0,1,8,0,0,5,6,8,0,3,8,2,0,6,2,8,0,2,4,102,0,1,5,6,0,2,1,6,0,0,0,0,0,0,0,0,0,0,0,0,0,5,7,1898,0,1,3,6,0,1,6,10,0,3,8,6,0,5,6,9,0,8,9,6,0,4,6,1635,0,10,1,0,0,10,0,6,0,9,5,0,0,5,6,0,0,0,0,0,0,2,6,1385,0,0,3,8,0,5,6,10,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,1120,0,10,5,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,3232,0,11,5,10,0,7,5,11,0,0,0,0,0,0,0,0,0,0,0,0,0,3,7,3497,0,11,5,10,0,11,7,5,0,8,3,0,0,0,0,0,0,0,0,0,0,3,7,3747,0,5,11,7,0,5,10,11,0,1,9,0,0,0,0,0,0,0,0,0,0,4,8,4010,0,10,7,5,0,10,11,7,0,9,8,1,0,8,3,1,0,0,0,0,0,3,5,2214,0,11,1,2,0,11,7,1,0,7,5,1,0,0,0,0,0,0,0,0,0,4,8,2479,0,0,8,3,0,1,2,7,0,1,7,5,0,7,2,11,0,0,0,0,0,4,6,2725,0,9,7,5,0,9,2,7,0,9,0,2,0,2,11,7,0,0,0,0,0,5,7,2988,0,7,5,2,0,7,2,11,0,5,9,2,0,3,2,8,0,9,8,2,0,3,5,1196,0,2,5,10,0,2,3,5,0,3,7,5,0,0,0,0,0,0,0,0,0,4,6,1445,0,8,2,0,0,8,5,2,0,8,7,5,0,10,2,5,0,0,0,0,0,4,8,1711,0,9,0,1,0,5,10,3,0,5,3,7,0,3,10,2,0,0,0,0,0,5,7,1958,0,9,8,2,0,9,2,1,0,8,7,2,0,10,2,5,0,7,5,2,0,2,4,170,0,1,3,5,0,3,7,5,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,419,0,0,8,7,0,0,7,1,0,1,7,5,0,0,0,0,0,0,0,0,0,3,5,681,0,9,0,3,0,9,3,5,0,5,3,7,0,0,0,0,0,0,0,0,0,2,4,928,0,9,8,7,0,5,9,7,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,3376,0,5,8,4,0,5,10,8,0,10,11,8,0,0,0,0,0,0,0,0,0,4,6,3129,0,5,0,4,0,5,11,0,0,5,10,11,0,11,3,0,0,0,0,0,0,4,8,3891,0,0,1,9,0,8,4,10,0,8,10,11,0,10,4,5,0,0,0,0,0,5,7,3642,0,10,11,4,0,10,4,5,0,11,3,4,0,9,4,1,0,3,1,4,0,4,6,2358,0,2,5,1,0,2,8,5,0,2,11,8,0,4,5,8,0,0,0,0,0,5,7,2111,0,0,4,11,0,0,11,3,0,4,5,11,0,2,11,1,0,5,1,11,0,5,7,2869,0,0,2,5,0,0,5,9,0,2,11,5,0,4,5,8,0,11,8,5,0,2,6,2620,0,9,4,5,0,2,11,3,0,0,0,0,0,0,0,0,0,0,0,0,0,4,6,1340,0,2,5,10,0,3,5,2,0,3,4,5,0,3,8,4,0,0,0,0,0,3,5,1077,0,5,10,2,0,5,2,4,0,4,2,0,0,0,0,0,0,0,0,0,0,5,9,1855,0,3,10,2,0,3,5,10,0,3,8,5,0,4,5,8,0,0,1,9,0,4,6,1590,0,5,10,2,0,5,2,4,0,1,9,2,0,9,4,2,0,0,0,0,0,3,5,314,0,8,4,5,0,8,5,3,0,3,5,1,0,0,0,0,0,0,0,0,0,2,4,51,0,0,4,5,0,1,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,4,6,825,0,8,4,5,0,8,5,3,0,9,0,5,0,0,3,5,0,0,0,0,0,1,3,560,0,9,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,3728,0,4,11,7,0,4,9,11,0,9,10,11,0,0,0,0,0,0,0,0,0,4,8,3993,0,0,8,3,0,4,9,7,0,9,11,7,0,9,10,11,0,0,0,0,0,4,6,3219,0,1,10,11,0,1,11,4,0,1,4,0,0,7,4,11,0,0,0,0,0,5,7,3482,0,3,1,4,0,3,4,8,0,1,10,4,0,7,4,11,0,10,11,4,0,4,6,2710,0,4,11,7,0,9,11,4,0,9,2,11,0,9,1,2,0,0,0,0,0,5,9,2975,0,9,7,4,0,9,11,7,0,9,1,11,0,2,11,1,0,0,8,3,0,3,5,2197,0,11,7,4,0,11,4,2,0,2,4,0,0,0,0,0,0,0,0,0,0,4,6,2460,0,11,7,4,0,11,4,2,0,8,3,4,0,3,2,4,0,0,0,0,0,4,6,1692,0,2,9,10,0,2,7,9,0,2,3,7,0,7,4,9,0,0,0,0,0,5,7,1941,0,9,10,7,0,9,7,4,0,10,2,7,0,8,7,0,0,2,0,7,0,5,7,1183,0,3,7,10,0,3,10,2,0,7,4,10,0,1,10,0,0,4,0,10,0,2,6,1430,0,1,10,2,0,8,7,4,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,666,0,4,9,1,0,4,1,7,0,7,1,3,0,0,0,0,0,0,0,0,0,4,6,915,0,4,9,1,0,4,1,7,0,0,8,1,0,8,7,1,0,0,0,0,0,2,4,153,0,4,0,3,0,7,4,3,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,400,0,4,8,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,3840,0,9,10,8,0,10,11,8,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,3593,0,3,0,9,0,3,9,11,0,11,9,10,0,0,0,0,0,0,0,0,0,3,5,3331,0,0,1,10,0,0,10,8,0,8,10,11,0,0,0,0,0,0,0,0,0,2,4,3082,0,3,1,10,0,11,3,10,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,2822,0,1,2,11,0,1,11,9,0,9,11,8,0,0,0,0,0,0,0,0,0,4,6,2575,0,3,0,9,0,3,9,11,0,1,2,9,0,2,11,9,0,0,0,0,0,2,4,2309,0,0,2,11,0,8,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,2060,0,3,2,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,5,1804,0,2,3,8,0,2,8,10,0,10,8,9,0,0,0,0,0,0,0,0,0,2,4,1541,0,9,10,2,0,0,9,2,0,0,0,0,0,0,0,0,0,0,0,0,0,4,6,1295,0,2,3,8,0,2,8,10,0,0,1,8,0,1,10,8,0,0,0,0,0,1,3,1030,0,1,10,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,778,0,1,3,8,0,9,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,515,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,265,0,0,3,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);var Ge=`struct Vertex {\r
    @builtin(vertex_index) index: u32,\r
    @location(0) position: vec3<f32>,\r
    @location(1) normal: vec3<f32>\r
};

struct VSInput {\r
    modelMatrix: mat4x4f,\r
    viewMatrix: mat4x4f,\r
    projectionMatrix: mat4x4f,\r
    eye_pos: vec3<f32>,\r
};

struct VSOutput {\r
    @builtin(position) position: vec4f,\r
    @location(0) color: vec3f,\r
    @location(1) normal: vec3f,\r
    @location(2) fragPos: vec3f,\r
};

const positions = array<vec3<f32>, 9>(\r
    vec3<f32>(-1.0, 1.0,  -1.0),\r
    vec3<f32>(1.0, 1.0,  -1.0),\r
    vec3<f32>(-1.0,  -1.0,  -1.0),\r
    vec3<f32>(-1.0,  1.0,  -1.0),\r
    vec3<f32>(1.0, 1.0, -1.0),\r
    vec3<f32>(-1.0, 1.0, 1.0),\r
    vec3<f32>(-1.0,  1.0, -1.0),\r
    vec3<f32>(-1.0,  1.0, 1.0),\r
    vec3<f32>(-1.0,  -1.0, -1.0),\r
);

@group(0) @binding(0) var<uniform> vsInput: VSInput;\r

@vertex fn vs(vert: Vertex) -> VSOutput {\r
    let worldPos = vsInput.modelMatrix * vec4f(vert.position, 1.0);

    var vsOut: VSOutput;\r
    vsOut.fragPos = worldPos.xyz;\r
    vsOut.position = vsInput.projectionMatrix * vsInput.viewMatrix * worldPos;\r
    vsOut.color = vec3f(0.4, 1.0-(worldPos.y/30.0), 0.8);\r
    vsOut.color *= clamp((1- vsOut.position.z / 50.0) , 0.0, 1.0);\r
    vsOut.normal = vert.normal;

    return vsOut;\r
}

@fragment fn fs(fsInput: VSOutput) -> @location(0) vec4f {\r
    var color = fsInput.color;

    let normal = normalize(fsInput.normal);\r
    let eyeDir = normalize(fsInput.fragPos - vsInput.eye_pos);

    let intensity = clamp(dot(normal, eyeDir), 0.0, 1.0);\r
    color *= intensity;    

    return vec4f(color, 1.0);\r
}`;function ze(t,e,n){const r={};return r.module=t.createShaderModule({label:"Rendering Shader",code:Ge}),r.vsSettingsBuffer=t.createBuffer({label:"Rendering stage vertex shader settings buffer",size:(3*(4*4)+3+1)*4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),r.bindGroupLayout=t.createBindGroupLayout({label:"Rendering stage bind group",entries:[{binding:0,visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}}]}),r.bindGroup=t.createBindGroup({label:"Rendering stage bind group",layout:r.bindGroupLayout,entries:[{binding:0,resource:{buffer:r.vsSettingsBuffer}}]}),r.pipelineLayout=t.createPipelineLayout({label:"Rendering stage pipeline layout",bindGroupLayouts:[r.bindGroupLayout]}),r.pipeline=t.createRenderPipeline({label:"Rendering stage pipeline",layout:r.pipelineLayout,vertex:{module:r.module,entryPoint:"vs",buffers:[{arrayStride:4*4*2,attributes:[{shaderLocation:0,offset:0,format:"float32x3"},{shaderLocation:1,offset:4*4,format:"float32x3"}]}]},fragment:{module:r.module,entryPoint:"fs",targets:[{format:n}]},depthStencil:{format:"depth24plus",depthWriteEnabled:!0,depthCompare:"less"}}),r.depthTexture=t.createTexture({label:"Depth texture",size:[e.outputWidth,e.outputHeight],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),r.depthTextureView=r.depthTexture.createView(),r.renderPassDescriptor={colorAttachments:[{view:void 0,clearValue:{r:0,g:0,b:0,a:1},storeOp:"store",loadOp:"clear"}],depthStencilAttachment:{view:r.depthTextureView,depthLoadOp:"clear",depthStoreOp:"store",depthClearValue:1}},r.testVertexBuffer=t.createBuffer({label:"Test vertex buffer",size:4*4*2*16,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST}),r.testVertexBufferArray=new Float32Array([1,0,0,0,0,0,0,0,-1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,-1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,-1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,-1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,-1,0,0,0,0,0,-1,1,0,0,0,0,0,0,-1,-1,0,0,0,0,0,0,-1,0,1,0,0,0,0,0,-1,0,-1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,-1,0,0,0,0,0]),t.queue.writeBuffer(r.testVertexBuffer,0,r.testVertexBufferArray),r.testIndexBuffer=t.createBuffer({label:"Test index buffer",size:4*16,usage:GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST}),r.testIndexBufferArray=new Uint32Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]),t.queue.writeBuffer(r.testIndexBuffer,0,r.testIndexBufferArray),r}function He(t){if(t&&!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=t,document.head.appendChild(e),t}}function N(t,e){var n=t.__state.conversionName.toString(),r=Math.round(t.r),i=Math.round(t.g),a=Math.round(t.b),o=t.a,u=Math.round(t.h),d=t.s.toFixed(1),f=t.v.toFixed(1);if(e||n==="THREE_CHAR_HEX"||n==="SIX_CHAR_HEX"){for(var _=t.hex.toString(16);_.length<6;)_="0"+_;return"#"+_}else{if(n==="CSS_RGB")return"rgb("+r+","+i+","+a+")";if(n==="CSS_RGBA")return"rgba("+r+","+i+","+a+","+o+")";if(n==="HEX")return"0x"+t.hex.toString(16);if(n==="RGB_ARRAY")return"["+r+","+i+","+a+"]";if(n==="RGBA_ARRAY")return"["+r+","+i+","+a+","+o+"]";if(n==="RGB_OBJ")return"{r:"+r+",g:"+i+",b:"+a+"}";if(n==="RGBA_OBJ")return"{r:"+r+",g:"+i+",b:"+a+",a:"+o+"}";if(n==="HSV_OBJ")return"{h:"+u+",s:"+d+",v:"+f+"}";if(n==="HSVA_OBJ")return"{h:"+u+",s:"+d+",v:"+f+",a:"+o+"}"}return"unknown format"}var he=Array.prototype.forEach,G=Array.prototype.slice,l={BREAK:{},extend:function(e){return this.each(G.call(arguments,1),function(n){var r=this.isObject(n)?Object.keys(n):[];r.forEach((function(i){this.isUndefined(n[i])||(e[i]=n[i])}).bind(this))},this),e},defaults:function(e){return this.each(G.call(arguments,1),function(n){var r=this.isObject(n)?Object.keys(n):[];r.forEach((function(i){this.isUndefined(e[i])&&(e[i]=n[i])}).bind(this))},this),e},compose:function(){var e=G.call(arguments);return function(){for(var n=G.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(e,n,r){if(e){if(he&&e.forEach&&e.forEach===he)e.forEach(n,r);else if(e.length===e.length+0){var i=void 0,a=void 0;for(i=0,a=e.length;i<a;i++)if(i in e&&n.call(r,e[i],i)===this.BREAK)return}else for(var o in e)if(n.call(r,e[o],o)===this.BREAK)return}},defer:function(e){setTimeout(e,0)},debounce:function(e,n,r){var i=void 0;return function(){var a=this,o=arguments;function u(){i=null,r||e.apply(a,o)}var d=r||!i;clearTimeout(i),i=setTimeout(u,n),d&&e.apply(a,o)}},toArray:function(e){return e.toArray?e.toArray():G.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return e===null},isNaN:function(t){function e(n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return isNaN(t)}),isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return e instanceof Function}},$e=[{litmus:l.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var n=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return n===null?!1:{space:"HEX",hex:parseInt("0x"+n[1].toString()+n[1].toString()+n[2].toString()+n[2].toString()+n[3].toString()+n[3].toString(),0)}},write:N},SIX_CHAR_HEX:{read:function(e){var n=e.match(/^#([A-F0-9]{6})$/i);return n===null?!1:{space:"HEX",hex:parseInt("0x"+n[1].toString(),0)}},write:N},CSS_RGB:{read:function(e){var n=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return n===null?!1:{space:"RGB",r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3])}},write:N},CSS_RGBA:{read:function(e){var n=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return n===null?!1:{space:"RGB",r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3]),a:parseFloat(n[4])}},write:N}}},{litmus:l.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:l.isArray,conversions:{RGB_ARRAY:{read:function(e){return e.length!==3?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return e.length!==4?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:l.isObject,conversions:{RGBA_OBJ:{read:function(e){return l.isNumber(e.r)&&l.isNumber(e.g)&&l.isNumber(e.b)&&l.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return l.isNumber(e.r)&&l.isNumber(e.g)&&l.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return l.isNumber(e.h)&&l.isNumber(e.s)&&l.isNumber(e.v)&&l.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return l.isNumber(e.h)&&l.isNumber(e.s)&&l.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],z=void 0,W=void 0,re=function(){W=!1;var e=arguments.length>1?l.toArray(arguments):arguments[0];return l.each($e,function(n){if(n.litmus(e))return l.each(n.conversions,function(r,i){if(z=r.read(e),W===!1&&z!==!1)return W=z,z.conversionName=i,z.conversion=r,l.BREAK}),l.BREAK}),W},_e=void 0,K={hsv_to_rgb:function(e,n,r){var i=Math.floor(e/60)%6,a=e/60-Math.floor(e/60),o=r*(1-n),u=r*(1-a*n),d=r*(1-(1-a)*n),f=[[r,d,o],[u,r,o],[o,r,d],[o,u,r],[d,o,r],[r,o,u]][i];return{r:f[0]*255,g:f[1]*255,b:f[2]*255}},rgb_to_hsv:function(e,n,r){var i=Math.min(e,n,r),a=Math.max(e,n,r),o=a-i,u=void 0,d=void 0;if(a!==0)d=o/a;else return{h:NaN,s:0,v:0};return e===a?u=(n-r)/o:n===a?u=2+(r-e)/o:u=4+(e-n)/o,u/=6,u<0&&(u+=1),{h:u*360,s:d,v:a/255}},rgb_to_hex:function(e,n,r){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,n),i=this.hex_with_component(i,0,r),i},component_from_hex:function(e,n){return e>>n*8&255},hex_with_component:function(e,n,r){return r<<(_e=n*8)|e&~(255<<_e)}},Xe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},k=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),R=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},V=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},M=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},A=function(){function t(){if(B(this,t),this.__state=re.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return k(t,[{key:"toString",value:function(){return N(this)}},{key:"toHexString",value:function(){return N(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),t}();function le(t,e,n){Object.defineProperty(t,e,{get:function(){return this.__state.space==="RGB"?this.__state[e]:(A.recalculateRGB(this,e,n),this.__state[e])},set:function(i){this.__state.space!=="RGB"&&(A.recalculateRGB(this,e,n),this.__state.space="RGB"),this.__state[e]=i}})}function de(t,e){Object.defineProperty(t,e,{get:function(){return this.__state.space==="HSV"?this.__state[e]:(A.recalculateHSV(this),this.__state[e])},set:function(r){this.__state.space!=="HSV"&&(A.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=r}})}A.recalculateRGB=function(t,e,n){if(t.__state.space==="HEX")t.__state[e]=K.component_from_hex(t.__state.hex,n);else if(t.__state.space==="HSV")l.extend(t.__state,K.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v));else throw new Error("Corrupted color state")};A.recalculateHSV=function(t){var e=K.rgb_to_hsv(t.r,t.g,t.b);l.extend(t.__state,{s:e.s,v:e.v}),l.isNaN(e.h)?l.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h};A.COMPONENTS=["r","g","b","h","s","v","hex","a"];le(A.prototype,"r",2);le(A.prototype,"g",1);le(A.prototype,"b",0);de(A.prototype,"h");de(A.prototype,"s");de(A.prototype,"v");Object.defineProperty(A.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}});Object.defineProperty(A.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=K.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var I=function(){function t(e,n){B(this,t),this.initialValue=e[n],this.domElement=document.createElement("div"),this.object=e,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return k(t,[{key:"onChange",value:function(n){return this.__onChange=n,this}},{key:"onFinishChange",value:function(n){return this.__onFinishChange=n,this}},{key:"setValue",value:function(n){return this.object[this.property]=n,this.__onChange&&this.__onChange.call(this,n),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),t}(),Ye={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},Ae={};l.each(Ye,function(t,e){l.each(t,function(n){Ae[n]=e})});var je=/(\d+(\.\d+)?)px/;function P(t){if(t==="0"||l.isUndefined(t))return 0;var e=t.match(je);return l.isNull(e)?0:parseFloat(e[1])}var s={makeSelectable:function(e,n){e===void 0||e.style===void 0||(e.onselectstart=n?function(){return!1}:function(){},e.style.MozUserSelect=n?"auto":"none",e.style.KhtmlUserSelect=n?"auto":"none",e.unselectable=n?"on":"off")},makeFullscreen:function(e,n,r){var i=r,a=n;l.isUndefined(a)&&(a=!0),l.isUndefined(i)&&(i=!0),e.style.position="absolute",a&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,n,r,i){var a=r||{},o=Ae[n];if(!o)throw new Error("Event type "+n+" not supported.");var u=document.createEvent(o);switch(o){case"MouseEvents":{var d=a.x||a.clientX||0,f=a.y||a.clientY||0;u.initMouseEvent(n,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,d,f,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var _=u.initKeyboardEvent||u.initKeyEvent;l.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),_(n,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break}default:{u.initEvent(n,a.bubbles||!1,a.cancelable||!0);break}}l.defaults(u,i),e.dispatchEvent(u)},bind:function(e,n,r,i){var a=i||!1;return e.addEventListener?e.addEventListener(n,r,a):e.attachEvent&&e.attachEvent("on"+n,r),s},unbind:function(e,n,r,i){var a=i||!1;return e.removeEventListener?e.removeEventListener(n,r,a):e.detachEvent&&e.detachEvent("on"+n,r),s},addClass:function(e,n){if(e.className===void 0)e.className=n;else if(e.className!==n){var r=e.className.split(/ +/);r.indexOf(n)===-1&&(r.push(n),e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return s},removeClass:function(e,n){if(n)if(e.className===n)e.removeAttribute("class");else{var r=e.className.split(/ +/),i=r.indexOf(n);i!==-1&&(r.splice(i,1),e.className=r.join(" "))}else e.className=void 0;return s},hasClass:function(e,n){return new RegExp("(?:^|\\s+)"+n+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var n=getComputedStyle(e);return P(n["border-left-width"])+P(n["border-right-width"])+P(n["padding-left"])+P(n["padding-right"])+P(n.width)},getHeight:function(e){var n=getComputedStyle(e);return P(n["border-top-width"])+P(n["border-bottom-width"])+P(n["padding-top"])+P(n["padding-bottom"])+P(n.height)},getOffset:function(e){var n=e,r={left:0,top:0};if(n.offsetParent)do r.left+=n.offsetLeft,r.top+=n.offsetTop,n=n.offsetParent;while(n);return r},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},Oe=function(t){V(e,t);function e(n,r){B(this,e);var i=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r)),a=i;i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox");function o(){a.setValue(!a.__prev)}return s.bind(i.__checkbox,"change",o,!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return k(e,[{key:"setValue",value:function(r){var i=R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(I),We=function(t){V(e,t);function e(n,r,i){B(this,e);var a=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r)),o=i,u=a;if(a.__select=document.createElement("select"),l.isArray(o)){var d={};l.each(o,function(f){d[f]=f}),o=d}return l.each(o,function(f,_){var c=document.createElement("option");c.innerHTML=_,c.setAttribute("value",f),u.__select.appendChild(c)}),a.updateDisplay(),s.bind(a.__select,"change",function(){var f=this.options[this.selectedIndex].value;u.setValue(f)}),a.domElement.appendChild(a.__select),a}return k(e,[{key:"setValue",value:function(r){var i=R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return s.isActive(this.__select)?this:(this.__select.value=this.getValue(),R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(I),qe=function(t){V(e,t);function e(n,r){B(this,e);var i=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r)),a=i;function o(){a.setValue(a.__input.value)}function u(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),s.bind(i.__input,"keyup",o),s.bind(i.__input,"change",o),s.bind(i.__input,"blur",u),s.bind(i.__input,"keydown",function(d){d.keyCode===13&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return k(e,[{key:"updateDisplay",value:function(){return s.isActive(this.__input)||(this.__input.value=this.getValue()),R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(I);function ge(t){var e=t.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var Te=function(t){V(e,t);function e(n,r,i){B(this,e);var a=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r)),o=i||{};return a.__min=o.min,a.__max=o.max,a.__step=o.step,l.isUndefined(a.__step)?a.initialValue===0?a.__impliedStep=1:a.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(a.initialValue))/Math.LN10))/10:a.__impliedStep=a.__step,a.__precision=ge(a.__impliedStep),a}return k(e,[{key:"setValue",value:function(r){var i=r;return this.__min!==void 0&&i<this.__min?i=this.__min:this.__max!==void 0&&i>this.__max&&(i=this.__max),this.__step!==void 0&&i%this.__step!==0&&(i=Math.round(i/this.__step)*this.__step),R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(r){return this.__min=r,this}},{key:"max",value:function(r){return this.__max=r,this}},{key:"step",value:function(r){return this.__step=r,this.__impliedStep=r,this.__precision=ge(r),this}}]),e}(I);function Ke(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var J=function(t){V(e,t);function e(n,r,i){B(this,e);var a=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,i));a.__truncationSuspended=!1;var o=a,u=void 0;function d(){var b=parseFloat(o.__input.value);l.isNaN(b)||o.setValue(b)}function f(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function _(){f()}function c(b){var p=u-b.clientY;o.setValue(o.getValue()+p*o.__impliedStep),u=b.clientY}function h(){s.unbind(window,"mousemove",c),s.unbind(window,"mouseup",h),f()}function y(b){s.bind(window,"mousemove",c),s.bind(window,"mouseup",h),u=b.clientY}return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),s.bind(a.__input,"change",d),s.bind(a.__input,"blur",_),s.bind(a.__input,"mousedown",y),s.bind(a.__input,"keydown",function(b){b.keyCode===13&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,f())}),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return k(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():Ke(this.getValue(),this.__precision),R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Te);function me(t,e,n,r,i){return r+(i-r)*((t-e)/(n-e))}var ie=function(t){V(e,t);function e(n,r,i,a,o){B(this,e);var u=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r,{min:i,max:a,step:o})),d=u;u.__background=document.createElement("div"),u.__foreground=document.createElement("div"),s.bind(u.__background,"mousedown",f),s.bind(u.__background,"touchstart",h),s.addClass(u.__background,"slider"),s.addClass(u.__foreground,"slider-fg");function f(p){document.activeElement.blur(),s.bind(window,"mousemove",_),s.bind(window,"mouseup",c),_(p)}function _(p){p.preventDefault();var m=d.__background.getBoundingClientRect();return d.setValue(me(p.clientX,m.left,m.right,d.__min,d.__max)),!1}function c(){s.unbind(window,"mousemove",_),s.unbind(window,"mouseup",c),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}function h(p){p.touches.length===1&&(s.bind(window,"touchmove",y),s.bind(window,"touchend",b),y(p))}function y(p){var m=p.touches[0].clientX,x=d.__background.getBoundingClientRect();d.setValue(me(m,x.left,x.right,d.__min,d.__max))}function b(){s.unbind(window,"touchmove",y),s.unbind(window,"touchend",b),d.__onFinishChange&&d.__onFinishChange.call(d,d.getValue())}return u.updateDisplay(),u.__background.appendChild(u.__foreground),u.domElement.appendChild(u.__background),u}return k(e,[{key:"updateDisplay",value:function(){var r=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=r*100+"%",R(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(Te),Be=function(t){V(e,t);function e(n,r,i){B(this,e);var a=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r)),o=a;return a.__button=document.createElement("div"),a.__button.innerHTML=i===void 0?"Fire":i,s.bind(a.__button,"click",function(u){return u.preventDefault(),o.fire(),!1}),s.addClass(a.__button,"button"),a.domElement.appendChild(a.__button),a}return k(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(I),ae=function(t){V(e,t);function e(n,r){B(this,e);var i=M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,r));i.__color=new A(i.getValue()),i.__temp=new A(0);var a=i;i.domElement=document.createElement("div"),s.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",s.bind(i.__input,"keydown",function(p){p.keyCode===13&&c.call(this)}),s.bind(i.__input,"blur",c),s.bind(i.__selector,"mousedown",function(){s.addClass(this,"drag").bind(window,"mouseup",function(){s.removeClass(a.__selector,"drag")})}),s.bind(i.__selector,"touchstart",function(){s.addClass(this,"drag").bind(window,"touchend",function(){s.removeClass(a.__selector,"drag")})});var o=document.createElement("div");l.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),l.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),l.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),l.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),l.extend(o.style,{width:"100%",height:"100%",background:"none"}),ve(o,"top","rgba(0,0,0,0)","#000"),l.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),Qe(i.__hue_field),l.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),s.bind(i.__saturation_field,"mousedown",u),s.bind(i.__saturation_field,"touchstart",u),s.bind(i.__field_knob,"mousedown",u),s.bind(i.__field_knob,"touchstart",u),s.bind(i.__hue_field,"mousedown",d),s.bind(i.__hue_field,"touchstart",d);function u(p){y(p),s.bind(window,"mousemove",y),s.bind(window,"touchmove",y),s.bind(window,"mouseup",f),s.bind(window,"touchend",f)}function d(p){b(p),s.bind(window,"mousemove",b),s.bind(window,"touchmove",b),s.bind(window,"mouseup",_),s.bind(window,"touchend",_)}function f(){s.unbind(window,"mousemove",y),s.unbind(window,"touchmove",y),s.unbind(window,"mouseup",f),s.unbind(window,"touchend",f),h()}function _(){s.unbind(window,"mousemove",b),s.unbind(window,"touchmove",b),s.unbind(window,"mouseup",_),s.unbind(window,"touchend",_),h()}function c(){var p=re(this.value);p!==!1?(a.__color.__state=p,a.setValue(a.__color.toOriginal())):this.value=a.__color.toString()}function h(){a.__onFinishChange&&a.__onFinishChange.call(a,a.__color.toOriginal())}i.__saturation_field.appendChild(o),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay();function y(p){p.type.indexOf("touch")===-1&&p.preventDefault();var m=a.__saturation_field.getBoundingClientRect(),x=p.touches&&p.touches[0]||p,L=x.clientX,v=x.clientY,E=(L-m.left)/(m.right-m.left),C=1-(v-m.top)/(m.bottom-m.top);return C>1?C=1:C<0&&(C=0),E>1?E=1:E<0&&(E=0),a.__color.v=C,a.__color.s=E,a.setValue(a.__color.toOriginal()),!1}function b(p){p.type.indexOf("touch")===-1&&p.preventDefault();var m=a.__hue_field.getBoundingClientRect(),x=p.touches&&p.touches[0]||p,L=x.clientY,v=1-(L-m.top)/(m.bottom-m.top);return v>1?v=1:v<0&&(v=0),a.__color.h=v*360,a.setValue(a.__color.toOriginal()),!1}return i}return k(e,[{key:"updateDisplay",value:function(){var r=re(this.getValue());if(r!==!1){var i=!1;l.each(A.COMPONENTS,function(u){if(!l.isUndefined(r[u])&&!l.isUndefined(this.__color.__state[u])&&r[u]!==this.__color.__state[u])return i=!0,{}},this),i&&l.extend(this.__color.__state,r)}l.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,o=255-a;l.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,ve(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),l.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),e}(I),Je=["-moz-","-o-","-webkit-","-ms-",""];function ve(t,e,n,r){t.style.background="",l.each(Je,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}function Qe(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var Ze={load:function(e,n){var r=n||document,i=r.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,r.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,n){var r=n||document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var a=r.getElementsByTagName("head")[0];try{a.appendChild(i)}catch{}}},e0=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,t0=function(e,n){var r=e[n];return l.isArray(arguments[2])||l.isObject(arguments[2])?new We(e,n,arguments[2]):l.isNumber(r)?l.isNumber(arguments[2])&&l.isNumber(arguments[3])?l.isNumber(arguments[4])?new ie(e,n,arguments[2],arguments[3],arguments[4]):new ie(e,n,arguments[2],arguments[3]):l.isNumber(arguments[4])?new J(e,n,{min:arguments[2],max:arguments[3],step:arguments[4]}):new J(e,n,{min:arguments[2],max:arguments[3]}):l.isString(r)?new qe(e,n):l.isFunction(r)?new Be(e,n,""):l.isBoolean(r)?new Oe(e,n):null};function n0(t){setTimeout(t,1e3/60)}var r0=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||n0,i0=function(){function t(){B(this,t),this.backgroundElement=document.createElement("div"),l.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),s.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),l.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;s.bind(this.backgroundElement,"click",function(){e.hide()})}return k(t,[{key:"show",value:function(){var n=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),l.defer(function(){n.backgroundElement.style.opacity=1,n.domElement.style.opacity=1,n.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var n=this,r=function i(){n.domElement.style.display="none",n.backgroundElement.style.display="none",s.unbind(n.domElement,"webkitTransitionEnd",i),s.unbind(n.domElement,"transitionend",i),s.unbind(n.domElement,"oTransitionEnd",i)};s.bind(this.domElement,"webkitTransitionEnd",r),s.bind(this.domElement,"transitionend",r),s.bind(this.domElement,"oTransitionEnd",r),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-s.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-s.getHeight(this.domElement)/2+"px"}}]),t}(),a0=He(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);Ze.inject(a0);var be="dg",ye=72,xe=20,j="Default",$=function(){try{return!!window.localStorage}catch{return!1}}(),X=void 0,we=!0,D=void 0,Z=!1,ke=[],w=function t(e){var n=this,r=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),s.addClass(this.domElement,be),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=l.defaults(r,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),r=l.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),l.isUndefined(r.load)?r.load={preset:j}:r.preset&&(r.load.preset=r.preset),l.isUndefined(r.parent)&&r.hideable&&ke.push(this),r.resizable=l.isUndefined(r.parent)&&r.resizable,r.autoPlace&&l.isUndefined(r.scrollable)&&(r.scrollable=!0);var i=$&&localStorage.getItem(F(this,"isLocal"))==="true",a=void 0,o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(h){n.parent?n.getRoot().preset=h:r.load.preset=h,l0(this),n.revert()}},width:{get:function(){return r.width},set:function(h){r.width=h,ue(n,h)}},name:{get:function(){return r.name},set:function(h){r.name=h,o&&(o.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(h){r.closed=h,r.closed?s.addClass(n.__ul,t.CLASS_CLOSED):s.removeClass(n.__ul,t.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=h?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return i},set:function(h){$&&(i=h,h?s.bind(window,"unload",a):s.unbind(window,"unload",a),localStorage.setItem(F(n,"isLocal"),h))}}}),l.isUndefined(r.parent)){if(this.closed=r.closed||!1,s.addClass(this.domElement,t.CLASS_MAIN),s.makeSelectable(this.domElement,!1),$&&i){n.useLocalStorage=!0;var u=localStorage.getItem(F(this,"gui"));u&&(r.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,s.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),r.closeOnTop?(s.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(s.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),s.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{r.closed===void 0&&(r.closed=!0);var d=document.createTextNode(r.name);s.addClass(d,"controller-name"),o=ce(n,d);var f=function(h){return h.preventDefault(),n.closed=!n.closed,!1};s.addClass(this.__ul,t.CLASS_CLOSED),s.addClass(o,"title"),s.bind(o,"click",f),r.closed||(this.closed=!1)}r.autoPlace&&(l.isUndefined(r.parent)&&(we&&(D=document.createElement("div"),s.addClass(D,be),s.addClass(D,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(D),we=!1),D.appendChild(this.domElement),s.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||ue(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},s.bind(window,"resize",this.__resizeHandler),s.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),s.bind(this.__ul,"transitionend",this.__resizeHandler),s.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&u0(this),a=function(){$&&localStorage.getItem(F(n,"isLocal"))==="true"&&localStorage.setItem(F(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a;function _(){var c=n.getRoot();c.width+=1,l.defer(function(){c.width-=1})}r.parent||_()};w.toggleHide=function(){Z=!Z,l.each(ke,function(t){t.domElement.style.display=Z?"none":""})};w.CLASS_AUTO_PLACE="a";w.CLASS_AUTO_PLACE_CONTAINER="ac";w.CLASS_MAIN="main";w.CLASS_CONTROLLER_ROW="cr";w.CLASS_TOO_TALL="taller-than-window";w.CLASS_CLOSED="closed";w.CLASS_CLOSE_BUTTON="close-button";w.CLASS_CLOSE_TOP="close-top";w.CLASS_CLOSE_BOTTOM="close-bottom";w.CLASS_DRAG="drag";w.DEFAULT_WIDTH=245;w.TEXT_CLOSED="Close Controls";w.TEXT_OPEN="Open Controls";w._keydownHandler=function(t){document.activeElement.type!=="text"&&(t.which===ye||t.keyCode===ye)&&w.toggleHide()};s.bind(window,"keydown",w._keydownHandler,!1);l.extend(w.prototype,{add:function(e,n){return Y(this,e,n,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,n){return Y(this,e,n,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var n=this;l.defer(function(){n.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&D.removeChild(this.domElement);var e=this;l.each(this.__folders,function(n){e.removeFolder(n)}),s.unbind(window,"keydown",w._keydownHandler,!1),Ee(this)},addFolder:function(e){if(this.__folders[e]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+e+'"');var n={name:e,parent:this};n.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(n.closed=this.load.folders[e].closed,n.load=this.load.folders[e]);var r=new w(n);this.__folders[e]=r;var i=ce(this,r.domElement);return s.addClass(i,"folder"),r},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],Ee(e);var n=this;l.each(e.__folders,function(r){e.removeFolder(r)}),l.defer(function(){n.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var n=s.getOffset(e.__ul).top,r=0;l.each(e.__ul.childNodes,function(i){e.autoPlace&&i===e.__save_row||(r+=s.getHeight(i))}),window.innerHeight-n-xe<r?(s.addClass(e.domElement,w.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-n-xe+"px"):(s.removeClass(e.domElement,w.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&l.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:l.debounce(function(){this.onResize()},50),remember:function(){if(l.isUndefined(X)&&(X=new i0,X.domElement.innerHTML=e0),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;l.each(Array.prototype.slice.call(arguments),function(n){e.__rememberedObjects.length===0&&s0(e),e.__rememberedObjects.indexOf(n)===-1&&e.__rememberedObjects.push(n)}),this.autoPlace&&ue(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=q(this)),e.folders={},l.each(this.__folders,function(n,r){e.folders[r]=n.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=q(this),oe(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[j]=q(this,!0)),this.load.remembered[e]=q(this),this.preset=e,se(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){l.each(this.__controllers,function(n){this.getRoot().load.remembered?Le(e||this.getRoot(),n):n.setValue(n.initialValue),n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())},this),l.each(this.__folders,function(n){n.revert(n)}),e||oe(this.getRoot(),!1)},listen:function(e){var n=this.__listening.length===0;this.__listening.push(e),n&&Pe(this.__listening)},updateDisplay:function(){l.each(this.__controllers,function(e){e.updateDisplay()}),l.each(this.__folders,function(e){e.updateDisplay()})}});function ce(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,n):t.__ul.appendChild(r),t.onResize(),r}function Ee(t){s.unbind(window,"resize",t.__resizeHandler),t.saveToLocalStorageIfPossible&&s.unbind(window,"unload",t.saveToLocalStorageIfPossible)}function oe(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];e?n.innerHTML=n.value+"*":n.innerHTML=n.value}function o0(t,e,n){if(n.__li=e,n.__gui=t,l.extend(n,{options:function(o){if(arguments.length>1){var u=n.__li.nextElementSibling;return n.remove(),Y(t,n.object,n.property,{before:u,factoryArgs:[l.toArray(arguments)]})}if(l.isArray(o)||l.isObject(o)){var d=n.__li.nextElementSibling;return n.remove(),Y(t,n.object,n.property,{before:d,factoryArgs:[o]})}},name:function(o){return n.__li.firstElementChild.firstElementChild.innerHTML=o,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof ie){var r=new J(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});l.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(a){var o=n[a],u=r[a];n[a]=r[a]=function(){var d=Array.prototype.slice.call(arguments);return u.apply(r,d),o.apply(n,d)}}),s.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof J){var i=function(o){if(l.isNumber(n.__min)&&l.isNumber(n.__max)){var u=n.__li.firstElementChild.firstElementChild.innerHTML,d=n.__gui.__listening.indexOf(n)>-1;n.remove();var f=Y(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return f.name(u),d&&f.listen(),f}return o};n.min=l.compose(i,n.min),n.max=l.compose(i,n.max)}else n instanceof Oe?(s.bind(e,"click",function(){s.fakeEvent(n.__checkbox,"click")}),s.bind(n.__checkbox,"click",function(a){a.stopPropagation()})):n instanceof Be?(s.bind(e,"click",function(){s.fakeEvent(n.__button,"click")}),s.bind(e,"mouseover",function(){s.addClass(n.__button,"hover")}),s.bind(e,"mouseout",function(){s.removeClass(n.__button,"hover")})):n instanceof ae&&(s.addClass(e,"color"),n.updateDisplay=l.compose(function(a){return e.style.borderLeftColor=n.__color.toString(),a},n.updateDisplay),n.updateDisplay());n.setValue=l.compose(function(a){return t.getRoot().__preset_select&&n.isModified()&&oe(t.getRoot(),!0),a},n.setValue)}function Le(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(r!==-1){var i=n.__rememberedObjectIndecesToControllers[r];if(i===void 0&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[e.property]=e,n.load&&n.load.remembered){var a=n.load.remembered,o=void 0;if(a[t.preset])o=a[t.preset];else if(a[j])o=a[j];else return;if(o[r]&&o[r][e.property]!==void 0){var u=o[r][e.property];e.initialValue=u,e.setValue(u)}}}}function Y(t,e,n,r){if(e[n]===void 0)throw new Error('Object "'+e+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new ae(e,n);else{var a=[e,n].concat(r.factoryArgs);i=t0.apply(t,a)}r.before instanceof I&&(r.before=r.before.__li),Le(t,i),s.addClass(i.domElement,"c");var o=document.createElement("span");s.addClass(o,"property-name"),o.innerHTML=i.property;var u=document.createElement("div");u.appendChild(o),u.appendChild(i.domElement);var d=ce(t,u,r.before);return s.addClass(d,w.CLASS_CONTROLLER_ROW),i instanceof ae?s.addClass(d,"color"):s.addClass(d,Xe(i.getValue())),o0(t,d,i),t.__controllers.push(i),i}function F(t,e){return document.location.href+"."+e}function se(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function Ce(t,e){e.style.display=t.useLocalStorage?"block":"none"}function s0(t){var e=t.__save_row=document.createElement("li");s.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),s.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",s.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",s.addClass(r,"button"),s.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",s.addClass(i,"button"),s.addClass(i,"save-as");var a=document.createElement("span");a.innerHTML="Revert",s.addClass(a,"button"),s.addClass(a,"revert");var o=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?l.each(t.load.remembered,function(c,h){se(t,h,h===t.preset)}):se(t,j,!1),s.bind(o,"change",function(){for(var c=0;c<t.__preset_select.length;c++)t.__preset_select[c].innerHTML=t.__preset_select[c].value;t.preset=this.value}),e.appendChild(o),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(a),$){var u=document.getElementById("dg-local-explain"),d=document.getElementById("dg-local-storage"),f=document.getElementById("dg-save-locally");f.style.display="block",localStorage.getItem(F(t,"isLocal"))==="true"&&d.setAttribute("checked","checked"),Ce(t,u),s.bind(d,"change",function(){t.useLocalStorage=!t.useLocalStorage,Ce(t,u)})}var _=document.getElementById("dg-new-constructor");s.bind(_,"keydown",function(c){c.metaKey&&(c.which===67||c.keyCode===67)&&X.hide()}),s.bind(n,"click",function(){_.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),X.show(),_.focus(),_.select()}),s.bind(r,"click",function(){t.save()}),s.bind(i,"click",function(){var c=prompt("Enter a new preset name.");c&&t.saveAs(c)}),s.bind(a,"click",function(){t.revert()})}function u0(t){var e=void 0;t.__resize_handle=document.createElement("div"),l.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function n(a){return a.preventDefault(),t.width+=e-a.clientX,t.onResize(),e=a.clientX,!1}function r(){s.removeClass(t.__closeButton,w.CLASS_DRAG),s.unbind(window,"mousemove",n),s.unbind(window,"mouseup",r)}function i(a){return a.preventDefault(),e=a.clientX,s.addClass(t.__closeButton,w.CLASS_DRAG),s.bind(window,"mousemove",n),s.bind(window,"mouseup",r),!1}s.bind(t.__resize_handle,"mousedown",i),s.bind(t.__closeButton,"mousedown",i),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function ue(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function q(t,e){var n={};return l.each(t.__rememberedObjects,function(r,i){var a={},o=t.__rememberedObjectIndecesToControllers[i];l.each(o,function(u,d){a[d]=e?u.initialValue:u.getValue()}),n[i]=a}),n}function l0(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value===t.preset&&(t.__preset_select.selectedIndex=e)}function Pe(t){t.length!==0&&r0.call(window,function(){Pe(t)}),l.each(t,function(e){e.updateDisplay()})}var d0=w;function c0(t,e,n,r,i){const a=new d0,o=document.getElementsByClassName("debug")[0];let u=a.addFolder("General Settings"),d=a.addFolder("Noise Settings"),f=a.addFolder("Marching Cubes Settings"),_=a.addFolder("Render Settings");return u.add(t,"toggleDebugNoise"),d.add(n.settings,"scale",.05,.15).onChange(()=>{n.updateSettingsBuffer()}),f.add(t,"animateIsoValue").onChange(()=>{r.updateSettingsBuffer()}),f.add(r.settings,"isoValue",0,1).onChange(()=>{r.updateSettingsBuffer()}),f.add(r.settings,"interpolationFactor",0,1).onChange(()=>{r.updateSettingsBuffer()}),_.add(e.camera,"fov",45,180),u.add(t,"toggleDebugDisplay").onChange(()=>{t.toggleDebugDisplay===!0?o.style.display="block":o.style.display="none"}),a}function ee(t){let e=`
`;for(let n=0;n<t.length;n++)e+=t[n].toFixed(1).padStart(4,"+")+", ",(n+1)%4===0&&n!==t.length-1&&(e+=`
`);return e}var f0=1e-6,T=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function p0(){var t=new T(9);return T!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function H(){var t=new T(16);return T!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function h0(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],d=e[5],f=e[6],_=e[7],c=e[8],h=e[9],y=e[10],b=e[11],p=e[12],m=e[13],x=e[14],L=e[15],v=n[0],E=n[1],C=n[2],S=n[3];return t[0]=v*r+E*u+C*c+S*p,t[1]=v*i+E*d+C*h+S*m,t[2]=v*a+E*f+C*y+S*x,t[3]=v*o+E*_+C*b+S*L,v=n[4],E=n[5],C=n[6],S=n[7],t[4]=v*r+E*u+C*c+S*p,t[5]=v*i+E*d+C*h+S*m,t[6]=v*a+E*f+C*y+S*x,t[7]=v*o+E*_+C*b+S*L,v=n[8],E=n[9],C=n[10],S=n[11],t[8]=v*r+E*u+C*c+S*p,t[9]=v*i+E*d+C*h+S*m,t[10]=v*a+E*f+C*y+S*x,t[11]=v*o+E*_+C*b+S*L,v=n[12],E=n[13],C=n[14],S=n[15],t[12]=v*r+E*u+C*c+S*p,t[13]=v*i+E*d+C*h+S*m,t[14]=v*a+E*f+C*y+S*x,t[15]=v*o+E*_+C*b+S*L,t}function _0(t,e,n){var r=n[0],i=n[1],a=n[2],o,u,d,f,_,c,h,y,b,p,m,x;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*a+e[12],t[13]=e[1]*r+e[5]*i+e[9]*a+e[13],t[14]=e[2]*r+e[6]*i+e[10]*a+e[14],t[15]=e[3]*r+e[7]*i+e[11]*a+e[15]):(o=e[0],u=e[1],d=e[2],f=e[3],_=e[4],c=e[5],h=e[6],y=e[7],b=e[8],p=e[9],m=e[10],x=e[11],t[0]=o,t[1]=u,t[2]=d,t[3]=f,t[4]=_,t[5]=c,t[6]=h,t[7]=y,t[8]=b,t[9]=p,t[10]=m,t[11]=x,t[12]=o*r+_*i+b*a+e[12],t[13]=u*r+c*i+p*a+e[13],t[14]=d*r+h*i+m*a+e[14],t[15]=f*r+y*i+x*a+e[15]),t}function g0(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,u=r+r,d=i+i,f=n*o,_=r*o,c=r*u,h=i*o,y=i*u,b=i*d,p=a*o,m=a*u,x=a*d;return t[0]=1-c-b,t[1]=_+x,t[2]=h-m,t[3]=0,t[4]=_-x,t[5]=1-f-b,t[6]=y+p,t[7]=0,t[8]=h+m,t[9]=y-p,t[10]=1-f-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m0(t,e,n,r,i){var a=1/Math.tan(e/2),o;return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function fe(){var t=new T(3);return T!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function v0(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Q(t,e,n){var r=new T(3);return r[0]=t,r[1]=e,r[2]=n,r}function b0(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function y0(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function x0(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ue(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function w0(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function te(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],u=n[1],d=n[2];return t[0]=i*d-a*u,t[1]=a*o-r*d,t[2]=r*u-i*o,t}function E0(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}var C0=v0;(function(){var t=fe();return function(e,n,r,i,a,o){var u,d;for(n||(n=3),r||(r=0),i?d=Math.min(i*n+r,e.length):d=e.length,u=r;u<d;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],a(t,t,o),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}})();function S0(){var t=new T(4);return T!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function A0(t,e,n,r){var i=new T(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function O0(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}(function(){var t=S0();return function(e,n,r,i,a,o){var u,d;for(n||(n=4),r||(r=0),i?d=Math.min(i*n+r,e.length):d=e.length,u=r;u<d;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],a(t,t,o),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}})();function Se(){var t=new T(4);return T!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function T0(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function B0(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),d=Math.cos(n);return t[0]=r*d-a*u,t[1]=i*d+o*u,t[2]=a*d+r*u,t[3]=o*d-i*u,t}function ne(t,e,n,r){var i=e[0],a=e[1],o=e[2],u=e[3],d=n[0],f=n[1],_=n[2],c=n[3],h,y,b,p,m;return y=i*d+a*f+o*_+u*c,y<0&&(y=-y,d=-d,f=-f,_=-_,c=-c),1-y>f0?(h=Math.acos(y),b=Math.sin(h),p=Math.sin((1-r)*h)/b,m=Math.sin(r*h)/b):(p=1-r,m=r),t[0]=p*i+m*d,t[1]=p*a+m*f,t[2]=p*o+m*_,t[3]=p*u+m*c,t}function k0(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[a*3+o]-e[o*3+a])*r,t[a]=(e[a*3+i]+e[i*3+a])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}var L0=A0,pe=O0;(function(){var t=fe(),e=Q(1,0,0),n=Q(0,1,0);return function(r,i,a){var o=w0(i,a);return o<-.999999?(te(t,e,i),C0(t)<1e-6&&te(t,n,i),Ue(t,t),T0(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(te(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,pe(r,r))}})();(function(){var t=Se(),e=Se();return function(n,r,i,a,o,u){return ne(t,r,o,u),ne(e,i,a,u),ne(n,t,e,2*u*(1-u)),n}})();(function(){var t=p0();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],pe(e,k0(e,t))}})();function P0(t,e,n){window.addEventListener("keydown",r=>{Object.keys(e.keyboard).includes(r.key)&&(r.preventDefault(),e.keyboard[r.key]=!0)}),window.addEventListener("keyup",r=>{console.log(r.key),Object.keys(e.keyboard).includes(r.key)&&(r.preventDefault(),e.keyboard[r.key]=!1)}),n.addEventListener("click",r=>{document.pointerLockElement===n?document.exitPointerLock():(n.requestPointerLock(),document.documentElement.requestFullscreen())}),n.addEventListener("mousemove",r=>{document.pointerLockElement===n&&B0(e.camera.rotation,e.camera.rotation,r.movementX*3e-4)}),n.addEventListener("pointerlockchange",r=>{if(document.pointerLockElement!==n)for(let i in e.keyboard)e.keyboard[i]=!1})}const O={cellCountX:10*4,cellCountY:10*4,cellCountZ:10*4,outputWidth:16*60,outputHeight:9*60,toggleDebugNoise:!1,toggleDebugDisplay:!1,animateIsoValue:!1,speed:.05},g={frameCount:0,prevTime:0,camera:{fov:45,pos:null,rotation:null,model_mat:null,view_mat:null,proj_mat:null},keyboard:{w:!1,a:!1,s:!1,d:!1," ":!1,Control:!1}},U={vsSettings:new Float32Array(3*(4*4)+3+1)};async function U0(){var c;g.camera.pos=Q(10,15,50),g.camera.rotation=L0(0,0,0,1),g.camera.model_mat=H(),g.camera.view_mat=H(),g.camera.proj_mat=H(),U.vsSettings.set(g.camera.model_mat,0),U.vsSettings.set(g.camera.view_mat,4*4),U.vsSettings.set(g.camera.proj_mat,4*4*2),U.vsSettings.set(g.camera.pos,4*4*3);const t=await((c=navigator.gpu)==null?void 0:c.requestAdapter()),e=await(t==null?void 0:t.requestDevice({requiredLimits:{maxStorageBufferBindingSize:1024*1024*512,maxBufferSize:1024*1024*512}}));if(!e){alert("need a browser that supports WebGPU");return}const n=document.getElementById("webgpu_canvas"),r=document.getElementsByClassName("debug")[0];n.width=O.outputWidth,n.height=O.outputHeight;const i=n.getContext("webgpu");if(i)console.log("Context created successfully");else{console.error("need a browser that supports WebGPU");return}const a={canvas:n,presentationFormat:navigator.gpu.getPreferredCanvasFormat(),depthTextureView:null};i.configure({device:e,format:a.presentationFormat});const o=Ve(e,O),u=Ie(e,O,o.noiseTexture,a.presentationFormat),d=Fe(e,O,o.noiseTexture),f=ze(e,O,a.presentationFormat);c0(O,g,o,d),P0(O,g,n);async function _(h){const y=h-g.time;g.time=h;const b=g0(H(),g.camera.rotation),p=Q(g.keyboard.d-g.keyboard.a,g.keyboard[" "]-g.keyboard.Control,g.keyboard.s-g.keyboard.w);Ue(p,p),E0(p,p,b),y0(p,p,O.speed),b0(g.camera.pos,g.camera.pos,p),h0(g.camera.view_mat,b,H()),_0(g.camera.view_mat,g.camera.view_mat,x0(fe(),g.camera.pos)),m0(g.camera.proj_mat,g.camera.fov*Math.PI/180,n.width/n.height,.1,1e3),pe(g.camera.rotation,g.camera.rotation),U.vsSettings.set(g.camera.view_mat,4*4),U.vsSettings.set(g.camera.proj_mat,4*4*2),U.vsSettings.set(g.camera.pos,4*4*3),e.queue.writeBuffer(f.vsSettingsBuffer,0,U.vsSettings);const m=e.createCommandEncoder({label:"Command encoder"}),x=m.beginComputePass({label:"Compute pass"});if(x.setPipeline(o.pipeline),x.setBindGroup(0,o.bindGroup),x.dispatchWorkgroups(O.cellCountX/4,O.cellCountY/4,O.cellCountZ/4),O.animateIsoValue===!0&&(d.settings.isoValue=Math.sin(h/400)/40+.5,d.updateSettingsBuffer()),x.setPipeline(d.pipeline),x.setBindGroup(0,d.bindGroup),x.dispatchWorkgroups(O.cellCountX/4,O.cellCountY/4,O.cellCountZ/4),x.end(),O.toggleDebugNoise===!0){u.renderPassDescriptor.colorAttachments[0].view=i.getCurrentTexture().createView();const v=m.beginRenderPass(u.renderPassDescriptor);e.queue.writeBuffer(u.settingsBuffer,0,new Uint32Array([Math.round(h/50)%40])),v.setPipeline(u.pipeline),v.setBindGroup(0,u.bindGroup),v.draw(3),v.end()}else{f.renderPassDescriptor.colorAttachments[0].view=i.getCurrentTexture().createView();const v=m.beginRenderPass(f.renderPassDescriptor);v.setPipeline(f.pipeline),v.setBindGroup(0,f.bindGroup),v.setVertexBuffer(0,d.vertexBuffer),v.setIndexBuffer(d.indexBuffer,"uint32"),v.drawIndexedIndirect(d.indirectArgsBuffer,4),v.end()}const L=m.finish();e.queue.submit([L]),r.innerText=`FPS: ${Math.round(1e3/y)}
    Position: x: ${g.camera.pos[0].toFixed(2)} y: ${g.camera.pos[1].toFixed(2)} z: ${g.camera.pos[2].toFixed(2)}
    Rotation: x: ${g.camera.rotation[0].toFixed(2)} y: ${g.camera.rotation[1].toFixed(2)} z: ${g.camera.rotation[2].toFixed(2)} w: ${g.camera.rotation[3].toFixed(2)}

    Model_Mat: ${ee(g.camera.model_mat)}
    
View_Mat: ${ee(g.camera.view_mat)} 
    
Proj_Mat: ${ee(g.camera.proj_mat)}`,g.frameCount++,e.queue.writeBuffer(d.indirectArgsBuffer,0,new Uint32Array([0,0,1,0,0,0])),requestAnimationFrame(_)}requestAnimationFrame(_)}U0();
